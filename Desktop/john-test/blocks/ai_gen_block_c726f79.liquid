{% doc %}
  @prompt
    Create an announcement bar that can edit background color, adjust the height, and customize the text. please make sure that it doesn't overlap with the navigation it should have its own block
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-announcement-bar-{{ ai_gen_id }} {
    display: block;
    width: 100%;
    background-color: {{ block.settings.background_color }};
    color: {{ block.settings.text_color }};
    text-align: {{ block.settings.text_alignment }};
    overflow: hidden;
  }

  .ai-announcement-bar-container-{{ ai_gen_id }} {
    display: flex;
    align-items: center;
    justify-content: {{ block.settings.text_alignment }};
    height: {{ block.settings.bar_height }}px;
    padding: 0 20px;
    max-width: 100%;
  }

  .ai-announcement-bar-text-{{ ai_gen_id }} {
    font-size: {{ block.settings.font_size }}px;
    margin: 0;
    line-height: 1.4;
  }

  .ai-announcement-bar-text-{{ ai_gen_id }} a {
    color: {{ block.settings.link_color }};
    text-decoration: underline;
  }

  .ai-announcement-bar-text-{{ ai_gen_id }} a:hover {
    color: {{ block.settings.link_hover_color }};
  }

  @media screen and (max-width: 749px) {
    .ai-announcement-bar-container-{{ ai_gen_id }} {
      height: {{ block.settings.bar_height_mobile }}px;
      padding: 0 16px;
    }

    .ai-announcement-bar-text-{{ ai_gen_id }} {
      font-size: {{ block.settings.font_size_mobile }}px;
    }
  }
{% endstyle %}

<announcement-bar-{{ ai_gen_id }} class="ai-announcement-bar-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-announcement-bar-container-{{ ai_gen_id }}">
    {% if block.settings.announcement_text != blank %}
      <div class="ai-announcement-bar-text-{{ ai_gen_id }}">
        {{ block.settings.announcement_text }}
      </div>
    {% else %}
      <div class="ai-announcement-bar-text-{{ ai_gen_id }}">
        Add your announcement text here
      </div>
    {% endif %}
  </div>
</announcement-bar-{{ ai_gen_id }}>

{% schema %}
{
  "name": "Announcement bar",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "richtext",
      "id": "announcement_text",
      "label": "Announcement text",
      "default": "<p>Welcome to our store! Free shipping on orders over $50</p>"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "header",
      "content": "Desktop"
    },
    {
      "type": "range",
      "id": "bar_height",
      "label": "Bar height",
      "min": 30,
      "max": 100,
      "step": 5,
      "unit": "px",
      "default": 50
    },
    {
      "type": "range",
      "id": "font_size",
      "label": "Font size",
      "min": 10,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 14
    },
    {
      "type": "header",
      "content": "Mobile"
    },
    {
      "type": "range",
      "id": "bar_height_mobile",
      "label": "Bar height",
      "min": 30,
      "max": 100,
      "step": 5,
      "unit": "px",
      "default": 45
    },
    {
      "type": "range",
      "id": "font_size_mobile",
      "label": "Font size",
      "min": 10,
      "max": 20,
      "step": 1,
      "unit": "px",
      "default": 12
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "link_color",
      "label": "Link",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "link_hover_color",
      "label": "Link hover",
      "default": "#cccccc"
    }
  ],
  "presets": [
    {
      "name": "Announcement bar"
    }
  ]
}
{% endschema %}
