{% comment %}
  Promotional Banner Section with Countdown Timer
  All elements are customizable through the Shopify theme editor
{% endcomment %}
<div class="clear"></div>
<style>
  .clear{ clear:both;}
  div#shopify-section-template--18632352661674__promo_banner_g34Q9c
 {
    margin-top: 0px;
}
  .promo-banner-{{ section.id }} {
    background-color: {{ section.settings.background_color }};
    {% if section.settings.background_image %}
      background-image: url('{{ section.settings.background_image | img_url: '2048x' }}');
      background-size: cover;
      background-position: center;
    {% endif %}
    padding: {{ section.settings.padding_top }}px 20px {{ section.settings.padding_bottom }}px;
    text-align: center;
    position: relative;
    min-height: 400px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .promo-banner-{{ section.id }}::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: {{ section.settings.overlay_color }};
    opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }};
    pointer-events: none;
  }

  .promo-banner-content {
    position: relative;
    z-index: 1;
    max-width: {{ section.settings.content_max_width }}px;
    margin: 0 auto;
    width: 100%;
    padding: {{ section.settings.content_padding }}px 15px;
    border-radius: {{ section.settings.content_border_radius }}px;
    box-shadow: {{ section.settings.content_shadow }};
  }

  .promo-banner-content::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: {{ section.settings.content_background }};
    opacity: {{ section.settings.content_opacity | divided_by: 100.0 }};
    border-radius: {{ section.settings.content_border_radius }}px;
    z-index: 0;
    pointer-events: none;
  }

  .promo-banner-content > *,
  .promo-banner-content .main-heading,
  .promo-banner-content .discount-text,
  .promo-banner-content .promo-banner-buttons,
  .promo-banner-content .afterpay-text,
  .promo-banner-content .countdown-section {
    position: relative;
    z-index: 1;
  }

  .promo-banner-{{ section.id }} .main-heading {
    font-size: {{ section.settings.heading_size }}px;
    font-weight: {{ section.settings.heading_weight }};
    font-family: {{ section.settings.heading_font }};
    color: {{ section.settings.heading_color }};
    margin: 0 0 24px;
    text-transform: uppercase;
    letter-spacing: 4px;
    line-height: 1.1;
  }

  .promo-banner-{{ section.id }} .discount-text {
    font-size: {{ section.settings.subheading_size }}px;
    font-family: {{ section.settings.subheading_font }};
    color: {{ section.settings.discount_color }};
    margin-bottom: 32px;
    line-height: 1.5;
    font-weight: 400;
  }

  .promo-banner-{{ section.id }} .discount-amount {
    font-weight: 700;
    color: {{ section.settings.discount_highlight_color }};
  }

  .promo-banner-{{ section.id }} .applied-text {
    color: {{ section.settings.subheading_color }};
    font-weight: 400;
  }

  .promo-banner-buttons {
    margin: 32px auto;
    display: flex;
    flex-direction: column;
    gap: 16px;
    align-items: center;
    max-width: 420px;
  }

  .promo-banner-{{ section.id }} .btn-order {
    background-color: {{ section.settings.primary_button_bg }};
    color: {{ section.settings.primary_button_text }};
    padding: 18px 48px;
    font-size: 18px;
    font-weight: 600;
    font-family: {{ section.settings.button_font }};
    border: none;
    border-radius: 8px;
    cursor: pointer;
    text-decoration: none;
    display: inline-block;
    transition: all 0.3s ease;
    width: 100%;
    max-width: 410px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }

  .promo-banner-{{ section.id }} .btn-order:hover {
    opacity: 0.92;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }

  .promo-banner-{{ section.id }} .btn-paypal {
    background-color: {{ section.settings.paypal_button_bg }};
    color: {{ section.settings.paypal_button_text_color }};
    padding: 18px 48px;
    font-size: 18px;
    font-weight: 600;
    font-family: {{ section.settings.button_font }};
    border: none;
    border-radius: 8px;
    cursor: pointer;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: all 0.3s ease;
    width: 100%;
    max-width: 410px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }

  .promo-banner-{{ section.id }} .btn-paypal:hover {
    opacity: 0.92;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }

  .paypal-logo {
    display: inline-flex;
    align-items: center;
    height: 20px;
  }

  .afterpay-text {
    font-size: 14px;
    font-family: {{ section.settings.body_font }};
    color: {{ section.settings.subheading_color }};
    margin: 20px 0 32px;
    line-height: 1.5;
  }

  .afterpay-logo {
    display: inline-block;
    background-color: #b2fce4;
    color: #000;
    padding: 2px 8px;
    border-radius: 4px;
    font-weight: 600;
    font-size: 12px;
    margin-left: 4px;
  }

  .countdown-section {
    margin-top: 40px;
  }

  .countdown-title {
    font-size: {{ section.settings.countdown_title_size }}px;
    font-family: {{ section.settings.countdown_font }};
    color: {{ section.settings.countdown_title_color }};
    font-weight: 600;
    margin-bottom: 24px;
    line-height: 1.4;
  }

  .countdown-timer {
    display: flex;
    justify-content: center;
    gap: 12px;
    flex-wrap: wrap;
    max-width: 500px;
    margin: 0 auto;
  }

  .countdown-item {
    background-color: {{ section.settings.countdown_bg }};
    color: {{ section.settings.countdown_text }};
    font-family: {{ section.settings.countdown_font }};
    padding: 10px 10px;
    border-radius: 8px;
    min-width: 40px;
    flex: 1;
    max-width: 75px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  }

  .countdown-item:nth-child(1) {
    background-color: {{ section.settings.countdown_days_bg }};
  }

  .countdown-item:nth-child(2) {
    background-color: {{ section.settings.countdown_hours_bg }};
  }

  .countdown-item:nth-child(3) {
    background-color: {{ section.settings.countdown_minutes_bg }};
  }

  .countdown-item:nth-child(4) {
    background-color: {{ section.settings.countdown_seconds_bg }};
  }

  .countdown-number {
    font-size: 30px;
    font-weight: 700;
    display: block;
    line-height: 1;
    letter-spacing: -1px;
  }

  .countdown-label {
    font-size: 13px;
    display: block;
    margin-top: 10px;
    text-transform: capitalize;
    font-weight: 500;
    opacity: 0.95;
  }

  /* Tablet Styles */
  @media (max-width: 1024px) {
    .promo-banner-{{ section.id }} {
      padding: {{ section.settings.padding_top | times: 0.85 }}px 20px {{ section.settings.padding_bottom | times: 0.85 }}px;
    }

    .promo-banner-{{ section.id }} .main-heading {
      font-size: {{ section.settings.heading_size | times: 0.8 }}px;
      letter-spacing: 3px;
      margin-bottom: 20px;
    }

    .promo-banner-{{ section.id }} .discount-text {
      font-size: {{ section.settings.subheading_size | times: 0.85 }}px;
      margin-bottom: 28px;
    }

    .countdown-timer {
      gap: 10px;
    }

    .countdown-item {
      min-width: 80px;
      max-width: 100px;
      padding: 18px 20px;
    }

    .countdown-number {
      font-size: 38px;
    }
  }

  /* Mobile Styles */
  @media (max-width: 768px) {
    .promo-banner-{{ section.id }} {
      padding: {{ section.settings.padding_top | times: 0.6 }}px 16px {{ section.settings.padding_bottom | times: 0.6 }}px;
      min-height: 300px;
    }

    .promo-banner-content {
      padding: 0 10px;
    }

    .promo-banner-{{ section.id }} .main-heading {
      font-size: {{ section.settings.heading_size | times: 0.55 }}px;
      letter-spacing: 2px;
      margin-bottom: 16px;
    }

    .promo-banner-{{ section.id }} .discount-text {
      font-size: {{ section.settings.subheading_size | times: 0.7 }}px;
      margin-bottom: 24px;
    }

    .promo-banner-buttons {
      max-width: 100%;
      gap: 12px;
      margin: 24px auto;
    }

    .promo-banner-{{ section.id }} .btn-order,
    .promo-banner-{{ section.id }} .btn-paypal {
      width: 100%;
      max-width: 100%;
      padding: 16px 32px;
      font-size: 16px;
    }

    .afterpay-text {
      font-size: 12px;
      margin: 16px 0 28px;
    }

    .countdown-section {
      margin-top: 32px;
    }

    .countdown-title {
      font-size: {{ section.settings.countdown_title_size | times: 0.85 }}px;
      margin-bottom: 20px;
      padding: 0 10px;
    }

    .countdown-timer {
      gap: 8px;
      max-width: 100%;
    }

    .countdown-item {
      min-width: 70px;
      max-width: 85px;
      padding: 14px 12px;
      flex: 1;
    }

    .countdown-number {
      font-size: 32px;
    }

    .countdown-label {
      font-size: 11px;
      margin-top: 8px;
    }
  }

  /* Small Mobile */
  @media (max-width: 480px) {
    .promo-banner-{{ section.id }} .main-heading {
      font-size: {{ section.settings.heading_size | times: 0.45 }}px;
      letter-spacing: 1.5px;
    }

    .promo-banner-{{ section.id }} .discount-text {
      font-size: {{ section.settings.subheading_size | times: 0.6 }}px;
    }

    .countdown-item {
      min-width: 60px;
      max-width: 75px;
      padding: 12px 10px;
    }

    .countdown-number {
      font-size: 28px;
    }

    .countdown-label {
      font-size: 10px;
    }
  }

  /* Prevent text overflow */
  .promo-banner-{{ section.id }} * {
    word-wrap: break-word;
    overflow-wrap: break-word;
  }
</style>

<div class="promo-banner-{{ section.id }}">
  <div class="promo-banner-content">
    {% if section.settings.show_heading %}
      <h1 class="main-heading">{{ section.settings.heading_text }}</h1>
    {% endif %}

    {% if section.settings.show_discount_text %}
      <p class="discount-text">
        <span class="discount-amount"><i>{{ section.settings.discount_text }}</i></span>
        <span class="applied-text">{{ section.settings.applied_text }}</span>
      </p>
    {% endif %}

    <div class="promo-banner-buttons">
      {% if section.settings.show_order_button %}
        <a href="{{ section.settings.order_button_link }}" class="btn-order">
          {{ section.settings.order_button_text }}
        </a>
      {% endif %}

      {% if section.settings.show_paypal_button %}
        <a href="{{ section.settings.paypal_button_link }}" class="btn-paypal">
          {{ section.settings.paypal_button_text }}
          {% if section.settings.show_paypal_logo and section.settings.paypal_logo_image %}
            <span class="paypal-logo">
              <img src="{{ section.settings.paypal_logo_image | img_url: 'master' }}" 
                   alt="PayPal" 
                   style="height: {{ section.settings.paypal_logo_height }}px; width: auto;">
            </span>
          {% endif %}
        </a>
      {% endif %}
    </div>

    {% if section.settings.show_afterpay %}
      <p class="afterpay-text">
        {{ section.settings.afterpay_text_before }}
        <span class="afterpay-logo">{{ section.settings.afterpay_logo_text }}</span>
      </p>
    {% endif %}

    {% if section.settings.show_countdown %}
      <div class="countdown-section">
        <p class="countdown-title">{{ section.settings.countdown_title }}</p>
        <div class="countdown-timer" id="countdown-{{ section.id }}">
          <div class="countdown-item">
            <span class="countdown-number" data-days>0</span>
            <span class="countdown-label">{{ section.settings.days_label }}</span>
          </div>
          <div class="countdown-item">
            <span class="countdown-number" data-hours>0</span>
            <span class="countdown-label">{{ section.settings.hours_label }}</span>
          </div>
          <div class="countdown-item">
            <span class="countdown-number" data-minutes>0</span>
            <span class="countdown-label">{{ section.settings.minutes_label }}</span>
          </div>
          <div class="countdown-item">
            <span class="countdown-number" data-seconds>0</span>
            <span class="countdown-label">{{ section.settings.seconds_label }}</span>
          </div>
        </div>
      </div>
    {% endif %}
  </div>
</div>

<script>
  (function() {
    const countdownElement = document.getElementById('countdown-{{ section.id }}');
    if (!countdownElement) return;

    // Parse the date - handle various formats
    let endDate;
    const dateString = '{{ section.settings.countdown_end_date }}';
    
    try {
      endDate = new Date(dateString).getTime();
      
      // Check if date is valid
      if (isNaN(endDate)) {
        console.error('Invalid countdown date format:', dateString);
        countdownElement.innerHTML = '<p style="color: {{ section.settings.countdown_title_color }};">Invalid date format</p>';
        return;
      }
    } catch (error) {
      console.error('Error parsing countdown date:', error);
      return;
    }

    function updateCountdown() {
      const now = new Date().getTime();
      const distance = endDate - now;

      if (distance < 0) {
        countdownElement.innerHTML = '<p style="color: {{ section.settings.countdown_title_color }};">{{ section.settings.expired_text }}</p>';
        clearInterval(countdownInterval);
        return;
      }

      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);

      const daysEl = countdownElement.querySelector('[data-days]');
      const hoursEl = countdownElement.querySelector('[data-hours]');
      const minutesEl = countdownElement.querySelector('[data-minutes]');
      const secondsEl = countdownElement.querySelector('[data-seconds]');

      if (daysEl) daysEl.textContent = days;
      if (hoursEl) hoursEl.textContent = hours;
      if (minutesEl) minutesEl.textContent = minutes;
      if (secondsEl) secondsEl.textContent = seconds;
    }

    // Initial update
    updateCountdown();
    
    // Update every second
    const countdownInterval = setInterval(updateCountdown, 1000);
  })();
</script>

{% schema %}
{
  "name": "Promotional Banner",
  "settings": [
    {
      "type": "header",
      "content": "Layout Settings"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#d4e8f0"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image"
    },
    {
      "type": "color",
      "id": "overlay_color",
      "label": "Overlay Color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Overlay Opacity",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Padding Top",
      "default": 80
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 80
    },
    {
      "type": "header",
      "content": "Content Box Settings"
    },
    {
      "type": "range",
      "id": "content_max_width",
      "min": 600,
      "max": 1400,
      "step": 50,
      "unit": "px",
      "label": "Content Box Max Width",
      "default": 900
    },
    {
      "type": "range",
      "id": "content_padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Content Box Padding",
      "default": 40
    },
    {
      "type": "color",
      "id": "content_background",
      "label": "Content Box Background",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "content_opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Content Box Opacity",
      "default": 100
    },
    {
      "type": "range",
      "id": "content_border_radius",
      "min": 0,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Content Box Border Radius",
      "default": 0
    },
    {
      "type": "text",
      "id": "content_shadow",
      "label": "Content Box Shadow (CSS)",
      "default": "none",
      "info": "Example: 0 4px 20px rgba(0,0,0,0.1)"
    },
    {
      "type": "header",
      "content": "Main Heading"
    },
    {
      "type": "checkbox",
      "id": "show_heading",
      "label": "Show Heading",
      "default": true
    },
    {
      "type": "text",
      "id": "heading_text",
      "label": "Heading Text",
      "default": "AWESOME!"
    },
    {
      "type": "text",
      "id": "heading_font",
      "label": "Heading Font Family",
      "default": "Arial, sans-serif",
      "info": "Example: 'Helvetica Neue', Arial, sans-serif"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 20,
      "max": 120,
      "step": 2,
      "unit": "px",
      "label": "Heading Size",
      "default": 64
    },
    {
      "type": "select",
      "id": "heading_weight",
      "label": "Heading Weight",
      "options": [
        { "value": "400", "label": "Normal" },
        { "value": "600", "label": "Semi Bold" },
        { "value": "700", "label": "Bold" },
        { "value": "900", "label": "Black" }
      ],
      "default": "900"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Discount Text"
    },
    {
      "type": "checkbox",
      "id": "show_discount_text",
      "label": "Show Discount Text",
      "default": true
    },
    {
      "type": "text",
      "id": "discount_text",
      "label": "Discount Text",
      "default": "Your discount of $67 off"
    },
    {
      "type": "text",
      "id": "applied_text",
      "label": "Applied Text",
      "default": "has been automatically applied."
    },
    {
      "type": "text",
      "id": "subheading_font",
      "label": "Subheading Font Family",
      "default": "Arial, sans-serif",
      "info": "Example: Georgia, serif"
    },
    {
      "type": "range",
      "id": "subheading_size",
      "min": 14,
      "max": 48,
      "step": 2,
      "unit": "px",
      "label": "Text Size",
      "default": 24
    },
    {
      "type": "color",
      "id": "discount_color",
      "label": "Discount Text Color",
      "default": "#666666"
    },
    {
      "type": "color",
      "id": "discount_highlight_color",
      "label": "Discount Amount Color",
      "default": "#c97854"
    },
    {
      "type": "color",
      "id": "subheading_color",
      "label": "Applied Text Color",
      "default": "#666666"
    },
    {
      "type": "header",
      "content": "Order Button"
    },
    {
      "type": "checkbox",
      "id": "show_order_button",
      "label": "Show Order Button",
      "default": true
    },
    {
      "type": "text",
      "id": "order_button_text",
      "label": "Button Text",
      "default": "Order Now"
    },
    {
      "type": "url",
      "id": "order_button_link",
      "label": "Button Link"
    },
    {
      "type": "color",
      "id": "primary_button_bg",
      "label": "Button Background",
      "default": "#c9a871"
    },
    {
      "type": "color",
      "id": "primary_button_text",
      "label": "Button Text Color",
      "default": "#ffffff"
    },
    {
      "type": "text",
      "id": "button_font",
      "label": "Button Font Family",
      "default": "Arial, sans-serif",
      "info": "Font family for all buttons"
    },
    {
      "type": "text",
      "id": "body_font",
      "label": "Body Font Family",
      "default": "Arial, sans-serif",
      "info": "Font family for body text (afterpay, etc.)"
    },
    {
      "type": "header",
      "content": "PayPal Button"
    },
    {
      "type": "checkbox",
      "id": "show_paypal_button",
      "label": "Show PayPal Button",
      "default": true
    },
    {
      "type": "text",
      "id": "paypal_button_text",
      "label": "Button Text",
      "default": "Pay with"
    },
    {
      "type": "checkbox",
      "id": "show_paypal_logo",
      "label": "Show PayPal Logo",
      "default": true
    },
    {
      "type": "image_picker",
      "id": "paypal_logo_image",
      "label": "PayPal Logo Image"
    },
    {
      "type": "range",
      "id": "paypal_logo_height",
      "min": 12,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "PayPal Logo Height",
      "default": 20
    },
    {
      "type": "url",
      "id": "paypal_button_link",
      "label": "Button Link"
    },
    {
      "type": "color",
      "id": "paypal_button_bg",
      "label": "Button Background",
      "default": "#ffc439"
    },
    {
      "type": "color",
      "id": "paypal_button_text_color",
      "label": "Button Text Color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Afterpay Section"
    },
    {
      "type": "checkbox",
      "id": "show_afterpay",
      "label": "Show Afterpay Text",
      "default": true
    },
    {
      "type": "text",
      "id": "afterpay_text_before",
      "label": "Text Before Logo",
      "default": "or 4 interest-free payments of $57.60 with"
    },
    {
      "type": "text",
      "id": "afterpay_logo_text",
      "label": "Afterpay Logo Text",
      "default": "afterpay"
    },
    {
      "type": "header",
      "content": "Countdown Timer"
    },
    {
      "type": "checkbox",
      "id": "show_countdown",
      "label": "Show Countdown",
      "default": true
    },
    {
      "type": "text",
      "id": "countdown_title",
      "label": "Countdown Title",
      "default": "Valentine's Day Sale Ends at 12PM Feb 14th 2025"
    },
    {
      "type": "range",
      "id": "countdown_title_size",
      "min": 12,
      "max": 32,
      "step": 2,
      "unit": "px",
      "label": "Title Size",
      "default": 18
    },
    {
      "type": "color",
      "id": "countdown_title_color",
      "label": "Title Color",
      "default": "#333333"
    },
    {
      "type": "text",
      "id": "countdown_end_date",
      "label": "End Date & Time",
      "info": "Formats: 'February 14, 2025 12:00:00' OR '2025-02-14T12:00:00' OR '02/14/2025 12:00 PM'",
      "default": "2025-12-31T23:59:59"
    },
    {
      "type": "text",
      "id": "countdown_font",
      "label": "Countdown Font Family",
      "default": "Arial, sans-serif",
      "info": "Font family for countdown timer"
    },
    {
      "type": "color",
      "id": "countdown_bg",
      "label": "Countdown Default Background",
      "default": "#6d6d6d",
      "info": "Default background if individual colors not set"
    },
    {
      "type": "color",
      "id": "countdown_days_bg",
      "label": "Days Background Color",
      "default": "#6d6d6d"
    },
    {
      "type": "color",
      "id": "countdown_hours_bg",
      "label": "Hours Background Color",
      "default": "#6d6d6d"
    },
    {
      "type": "color",
      "id": "countdown_minutes_bg",
      "label": "Minutes Background Color",
      "default": "#6d6d6d"
    },
    {
      "type": "color",
      "id": "countdown_seconds_bg",
      "label": "Seconds Background Color",
      "default": "#6d6d6d"
    },
    {
      "type": "color",
      "id": "countdown_text",
      "label": "Countdown Text Color",
      "default": "#ffffff"
    },
    {
      "type": "text",
      "id": "days_label",
      "label": "Days Label",
      "default": "Days"
    },
    {
      "type": "text",
      "id": "hours_label",
      "label": "Hours Label",
      "default": "Hours"
    },
    {
      "type": "text",
      "id": "minutes_label",
      "label": "Minutes Label",
      "default": "Minutes"
    },
    {
      "type": "text",
      "id": "seconds_label",
      "label": "Seconds Label",
      "default": "Seconds"
    },
    {
      "type": "text",
      "id": "expired_text",
      "label": "Expired Message",
      "default": "Sale has ended"
    }
  ],
  "presets": [
    {
      "name": "Custom Promotional Banner",
      "category": "Promotional"
    }
  ]
}
{% endschema %}
